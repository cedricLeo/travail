{% extends '::base1.html.twig' %}
{% block content %}
	<div class="tabAdmin">	
		<table align="center" width="100%" cellspacing="0" cellpadding="0" border="0" class="template_etroit">
			<tbody>
				<tr class="rowheader">
					<td> 
					 <a href="{{path('_Dashboard_addutilisateurssysteme')}}" class="addpays"><img src="{{ asset('bundles/myappadmin/images/Button Add.png') }}" class="add_ville" />Ajouter un administrateur à Global réservation</a> 
						<table align="center" width="550" cellspacing="3" cellpadding="0" border="0">
							<tbody>
									<tr class="rowsubheader">
										<td width="270" colspan=1>Utilisateurs du système</td>
										<td width="270">Rôle</td>
										<td width="270">Voir les logs</td>
										<td width="270">Modifier le mot de passe</td>
										<td width="270">Actif</td>
									</tr>
								{% for p in listuser %} {# Boucle l'objet listuser pour afficher les information des utilisateurs du système #}
								
									{% for role in p.roles %} {# Boucle pour ne pas faire afficher les utilisateurs qui ont les roles ROLE_USER #}
										<tr>
											<td colspan=1><a href="{{path('_Dashboard_updateutilisateurssysteme',{'id':p.id})}}">{{ p.username }}</a></td>
											<td colspan=1>
												<a href="{{path('_Dashboard_updateutilisateurssysteme',{'id':p.id})}}">
													{% for role in p.roles %} 
													  	{% if role == "ROLE_SUPER_ADMIN" %} {# Affiche les utilisateurs ayant les roles super_admin  #}
															{{ role }} 
													  	{% endif %}
													{% endfor %}
												 </a>
											</td>
											<td colspan=1><a href="{{path('_Dashboard_updateutilisateurssysteme',{'id':p.id})}}">Logs</a></td>
											<td colspan=1><a href="{{path('_Dashboard_updateutilisateurssysteme',{'id':p.id})}}">Modifier le mot de passe</a></td>
											<td colspan=1><a href="{{path('_Dashboard_updateutilisateurssysteme',{'id':p.id})}}">{% if p.isActive == 0 %}<img id="{{ p.id }}" name="actif" src="{{ asset('bundles/myappadmin/images/buttons_cancel_xxl.png') }}" title="Utilisateur non actif" />{% else %}<img name="actif" id="{{ p.id }}" src="{{ asset('bundles/myappadmin/images/buttons_ok_xxl.png') }}" title="Utilisateur Global actif"/>{% endif %}</a></td>
										</tr>
									{% endfor %} {# Fermeture de la boucle pour le tri des roles #}
								
								{% endfor %} {# Fermeture de la boucle pour afficher les informations des utilisateurs du système #}
							</tbody>
						</table>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
{% endblock %}